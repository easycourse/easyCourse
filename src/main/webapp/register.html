<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="description" content="注册页面" />
		<link href="./public/css/register.css" rel="stylesheet" />
		<link rel="icon" type="image/x-icon" href="./public/img/icon.png" />
		<script src="./libs/jquery-3.3.1.js"></script>

		<link href="./libs/bookstrap/css/bootstrap.min.css" rel="stylesheet">

		<script src="./libs/bookstrap/js/bootstrap.min.js"></script>
		<title>easyCourse-注册</title>
	</head>
	<body>
		<div id="app">
			<header>
				<nav class="navbar navbar-dark fixed-top navbar-expand-lg" role="navigation">
					<a class="navbar-brand" href="#">
						<img src="./public/img/icon.png" width="30" height="30" class="d-inline-block align-top" alt="">
						EasyCourse
					</a>
				</nav>
			</header>
			<div id="main">
				<div class="rigister">
					<p class="title">{{title}}</p>
					<div class="inputBox">
						<div class="input-item">
							<label style="float: left;">{{user}}:</label>
							<input name="username" type="text" :placeholder="please"  v-model='username' />
						</div>
						<div class="input-item">
							<label>密码:</label>
							<input name="password" type="password" placeholder="请输入密码" v-model='password' />
						</div>
						<div class="input-item">
							<label>确认密码:</label>
							<input name="surePassword" type="password" placeholder="请确认密码" v-model='surePassword' />
						</div>
						<div class="input-item">
							<label>邮箱:</label>
							<input name="email" type="text" placeholder="请输入邮箱" v-model='email' />
						</div>
					</div>
					<div class="btn-box">
						<button class="register btn btn-outline-dark" @click="regist">
							<img src="./public/img/regist.png" />
						</button>
						<p class="prompt">{{msg}}</p>
					</div>

				</div>
			</div>

		</div>
	</body>
	<script src="./public/ajax.js"></script>
	<script src="./libs/vue-2.4.0.js"></script>
	<script>
		var vm = new Vue({
			el: "#app",
			data: {
				title: '', //学生或教师注册
				user: '', //学号或教工号
				please: '', //学号的placeholder
				
				type: 0, //0为学生,1为教师
				username: '',
				password: '',
				surePassword: '',
				email: '',
				msg:''
			},
			methods: {
				regist(){
					if (this.password == '') {
						this.msg = '请输入密码！'
						return
					}else if(this.surePassword == ''){
						this.msg = '请确认密码！'
						return
					}else if(this.email == ''){
						this.msg = '请输入邮箱'
						return
					}else if(this.password != this.surePassword){
						this.msg = '两次密码输入不一致！'
						return
					}
					var data = {
						type: this.type,
						username: this.username,
						password: this.password,
						surePassword: this.password,
						email: this.email
					}
					
					new AjaxRequest({
						type: "post",
						url: "/registe",
						param: JSON.stringify(data),
						isShowLoader: true,
						dataType: "json",
						callBack: function(res) {
							console.log(res);
						}
					})
				}
			},
			created() {
				//这里判断用户注册的类型,设置相应的数据(从url种获取参数)

				if (this.type) {
					this.title = '教师注册'
					this.user = '教工号'
					this.please = '请输入教工号'
				} else {
					this.title = '学生注册'
					this.user = '学号'
					this.please = '请输入学号'
				}

			},
		})
	</script>
</html>
